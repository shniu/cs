---
description: 可以用作开发过程中的数据库的 Checklist 的实践
---

# MySQL 最佳实践

**关于连接**

* 一个用户成功建立连接后，即使你用管理员账号对这个用户的权限做了修改，也不会影响已经存在连接的权限。修改完成后，只有再新建的连接才会使用新的权限设置；可以使用 `show processlist` 查看相关信息； `wait_timeout` 参数用来控制某个连接的最大空闲时间；

```text
mysql> show variables like 'wait_timeout';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| wait_timeout  | 28800 |
+---------------+-------+
1 row in set (0.06 sec)


// 试图使用一个已经断开的连接发送请求，会收到 Lost connection to MySQL server during query.
```

* 数据库里面，长连接是指连接成功后，如果客户端持续有请求，则一直使用同一个连接。短连接则是指每次执行完很少的几次查询就断开连接，下次查询再重新建立一个。建立连接的过程通常是比较复杂的，所以在使用中要尽量减少建立连接的动作，也就是尽量使用长连接；一般在客户端会使用数据库连接池。但是有时候也需要注意，MySQL 临时使用的内存是管理在连接的内存对象中的，如果某个连接长期存在，而且做过一些比较大的操作，就会占用比较多的内存，如果这样的连接积累的越多，内存占用的就会越多，有时候还会引起连接异常中断，可以：每过一段时间连接断开后重连，尤其是做个大的操作；另外就是使用 `mysql_reset_connection`

**关于索引**





