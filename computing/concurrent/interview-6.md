# 万能钥匙：管程

管程是一种并发访问共享资源的方式，在并发编程领域应用广泛。

## 信号量和管程

最先引入并发概念的软件是操作系统，OS 的出现让计算机进入了一个前所未有的时代，而多任务管理让计算机更进一步；多任务管理的OS中，最大的价值体现是多个任务之间相互配合完成复杂的事情，这势必会出现多个任务访问同一个资源的情况出现，当某个任务访问完了共享资源又如何通知其他的任务来执行呢？这里就引出了并发编程的两个核心问题：互斥和同步。

信号量是最先提出的模型，用来解决多线程并发访问共享资源的互斥和同步问题。基本模型如下：

1. 声明一个共享资源的数量 sem
2. 提供一个 P 操作可以对 sem 进行 -1 操作，当 sem < 0 时，当前线程进入阻塞等待状态
3. 提供一个 V 操作对 sem 进行 +1 操作，当 sem < 0 时，唤醒一个线程


