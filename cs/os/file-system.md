# 文件系统



文件系统功能规划

1. 文件系统要有严格的组织形式，使得文件能够以块为单位进行存储
2. 文件系统中也要有索引区，用来方便查找一个文件分成的多个块都存放在了什么位置
3. 如果文件系统中有的文件是热点文件，近期经常被读取和写入，文件系统应该有缓存层
4. 文件应该用文件夹的形式组织起来，方便管理和查询
5. Linux 内核要在自己的内存里面维护一套数据结构，来保存哪些文件被哪些进程打开和使用

文件系统相关命令行

```bash
# 查看格式化和没有格式化的分区
$ fdisk -l

# 格式化磁盘
$ mkfs.ext4 /dev/vdc

# 选择将磁盘格式化为多个分区
$ fdisk /dev/vdc

# 挂载
$ mount /dev/vdc /var/log

# 卸载
$ unmount /var/log

# 查看文件
ls -l
# - 表示普通文件；
# d 表示文件夹；
# c 表示字符设备文件，
# b 表示块设备文件
# s 表示套接字 socket 文件，
# l 表示符号链接，也即软链接，就是通过名字指向另外一个文件
```

系统调用

文件描述符：是用来区分一个进程打开的多个文件的。它的作用域就是当前进程，出了当前进程这个文件描述符就没有意义了。open 返回的 fd 必须记录好，我们对这个文件的所有操作都要靠这个 fd，包括最后关闭文件。在调用 open\(\) 系统调用时，OS 会返回一个 fd

```text

```

