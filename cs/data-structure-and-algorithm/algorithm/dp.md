# 动态规划

动态规划一个比较难理解且难学好的算法，但是他很重要，可以解决很多很实际的问题。

动态规划非常适合解决最优化问题，比如求最大值、最小值等。通过对它的初步学习，DP 的难点在于以下几点：

1. 求解思路不太符合人类常规的思维
2. 识别要解决的问题可以用 DP 来解决，比如需要识别最优子结构、重复子问题
3. 正确划分子问题，定义清楚状态数组，找到 DP 方程

只要能做好以上几点，DP 的问题应该都可以解决，一般 DP 的代码实现都相对简单，但是解题思路非常跳跃。然后，通过很多例子的练习来熟练掌握动态规划。



本质上，动态规划是一种算法设计技巧，最终都会有一些可以复用的规律。动态规划是用来解决最优化问题的，所以一般情况下的最优化问题都可以使用它来解决。而动态规划相关的问题有一些套路，演化规律是：使用暴力递归解决 -&gt; 使用带有备忘录的递归解决 -&gt; 使用非递归的动态规划（自顶向下和自底向上）；整个过程是层层递进，从递归树中一点点找到可以重复利用的规律。

我们知道，适合用动态规划的最优化问题需要具备两个基本要素：最优子结构和重叠子问题，那么正确理解这两个基本要素是非常重要的。

* 最优子结构

怎么理解最优子结构呢？最优子结构意思是原问题的解由子问题的最优解构成，也就是说可以用子问题的最优解来推导出问题的最优解，仍然是很抽象。比如 Coin Change 问题，用 coins 中的哪个硬币之间并不会相互影响，子问题的解之间是相互独立的，也就是说 f\(11\) = f\(10\) + f\(9\) + f\(6\)，子问题 f\(10\)/f\(9\)/f\(6\) 之间是相互独立的且组合后可以推导出问题的解，这种性质就是说明该问题具备最优子结构的性质，这个很关键。

* 重叠子问题

这是另外一个DP的基本特性。在求解DP问题时，子问题的空间要足够小，递归算法会反复求解相同的子问题，而不是一直生成新的子问题，还是很抽象。比如求解斐波那契额数列时，计算 f\(10\), 需要计算 f\(9\) 和 f\(8\), 计算 f\(9\) 需要计算 f\(8\) 和 f\(7\), 可见子问题 f\(8\) 被重复计算了多次，而 f\(8\) 这种现象就是重叠子问题，以此类推，会有很多这样的重叠子问题，重叠子问题带来的坏处是大量的重复计算，要消去重叠子问题带来的影响，一种办法就是使用备忘录，通过查询备忘录减少重复计算。在动态规划中可以使用状态转移表。

除此之外，状态转移方程是解决DP问题时又一个重要的特点。我们从最优子结构特性可以知道通过递归求解子问题来得到问题的解，所以可以得到递归推导式，也可以叫做状态转移方程。一般有自顶向下的备忘录递归解法和自底向上的迭代推导解法。能够正确找到状态转移方程是解决DP问题的关键一步。

## DP 问题详解

### 问题1 0-1背包问题

> 给定一组物品，每种物品都有自己的重量和价格，在限定的总重量内，我们如何选择，才能使得物品的总价格最高。问题的名称来源于如何选择最合适的物品放置于给定背包中。 我们有 n 种物品，物品 j 的重量为wj，价格为pj。我们假定所有物品的重量和价格都是非负的。背包所能承受的最大重量为W。 如果限定每种物品只能选择0个或1个，则问题称为0-1背包问题。

## DP 的经典问题

* 爬楼梯问题（以及爬楼梯问题的升级版）

问题升级：

1. 可以爬 1，2，3 级台阶
2. 相邻两步的台阶数不能一样
3. 可以爬一个数组 \[s1, s2, ..., sm\] 且相邻领部的台阶数不能一样

